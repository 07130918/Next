{"ast":null,"code":"import _slicedToArray from\"/Users/satokota/Desktop/programming/react/complete-tutorial/04_react_basic/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./App.css\";import{Suspense,useState,useEffect,lazy}from\"react\";import BaseErrorBoundary from\"./BaseErrorBoundary\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var STORAGE_KEY=\"rcg-current-lec-index\";var DynamicLoader=function DynamicLoader(_ref){var component=_ref.component;var LazyComponent=/*#__PURE__*/lazy(function(){return import(\"\".concat(component));});return/*#__PURE__*/_jsx(BaseErrorBoundary,{children:/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),children:/*#__PURE__*/_jsx(LazyComponent,{})})});};var App=function App(_ref2){var _localStorage$getItem;var lectures=_ref2.lectures;/**\n   * ローカルストレージより画面復帰時のレクチャーインデックスを取得\n   */var restoredLecIndx=(_localStorage$getItem=localStorage.getItem(STORAGE_KEY))!==null&&_localStorage$getItem!==void 0?_localStorage$getItem:0;restoredLecIndx=restoredLecIndx<lectures.length?restoredLecIndx:0;var _useState=useState(restoredLecIndx),_useState2=_slicedToArray(_useState,2),lecIndex=_useState2[0],setLecIndex=_useState2[1];/**\n   * レクチャーID（フォルダ名）を取得\n   */var lecId=lectures[lecIndex];/**\n   * プルダウン変更時処理\n   */var handleChange=function handleChange(event){return setLecIndex(event.target.value);};useEffect(function(){return localStorage.setItem(STORAGE_KEY,lecIndex);},[lecIndex]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"select\",{className:\"App-select\",value:lecIndex,onChange:handleChange,children:lectures.map(function(id,index){return/*#__PURE__*/_jsx(\"option\",{value:index,children:id},id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"App-start\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u7DF4\\u7FD2\\u30B3\\u30FC\\u30C9 start\"}),/*#__PURE__*/_jsx(DynamicLoader,{component:\"./\".concat(lecId,\"/start/Example\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"App-end\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u5B8C\\u6210\\u30B3\\u30FC\\u30C9 end \"}),/*#__PURE__*/_jsx(DynamicLoader,{component:\"./\".concat(lecId,\"/end/Example\")})]})]});};export default App;","map":{"version":3,"names":["Suspense","useState","useEffect","lazy","BaseErrorBoundary","STORAGE_KEY","DynamicLoader","component","LazyComponent","App","lectures","restoredLecIndx","localStorage","getItem","length","lecIndex","setLecIndex","lecId","handleChange","event","target","value","setItem","map","id","index"],"sources":["/Users/satokota/Desktop/programming/react/complete-tutorial/04_react_basic/src/App.js"],"sourcesContent":["import \"./App.css\";\nimport { Suspense, useState, useEffect, lazy } from \"react\";\nimport BaseErrorBoundary from \"./BaseErrorBoundary\";\n\nconst STORAGE_KEY = \"rcg-current-lec-index\";\n\nconst DynamicLoader = ({ component }) => {\n  const LazyComponent = lazy(() => import(`${component}`));\n  return (\n    <BaseErrorBoundary>\n      <Suspense fallback={<div>Loading...</div>}>\n        <LazyComponent />\n      </Suspense>\n    </BaseErrorBoundary>\n  );\n};\n\nconst App = ({ lectures }) => {\n  /**\n   * ローカルストレージより画面復帰時のレクチャーインデックスを取得\n   */\n  let restoredLecIndx = localStorage.getItem(STORAGE_KEY) ?? 0;\n  restoredLecIndx = restoredLecIndx < lectures.length ? restoredLecIndx : 0;\n  const [lecIndex, setLecIndex] = useState(restoredLecIndx);\n\n  /**\n   * レクチャーID（フォルダ名）を取得\n   */\n  const lecId = lectures[lecIndex];\n\n  /**\n   * プルダウン変更時処理\n   */\n  const handleChange = (event) => setLecIndex(event.target.value);\n  useEffect(() => localStorage.setItem(STORAGE_KEY, lecIndex), [lecIndex]);\n\n  return (\n    <div className=\"App\">\n      <select className=\"App-select\" value={lecIndex} onChange={handleChange}>\n        {lectures.map((id, index) => (\n          <option key={id} value={index}>\n            {id}\n          </option>\n        ))}\n      </select>\n\n      <div className=\"App-start\">\n        <h2>練習コード start</h2>\n        <DynamicLoader component={`./${lecId}/start/Example`} />\n      </div>\n      <div className=\"App-end\">\n        <h2>完成コード end </h2>\n        <DynamicLoader component={`./${lecId}/end/Example`} />\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"gKAAA,MAAO,WAAP,CACA,OAASA,QAAT,CAAmBC,QAAnB,CAA6BC,SAA7B,CAAwCC,IAAxC,KAAoD,OAApD,CACA,MAAOC,kBAAP,KAA8B,qBAA9B,C,wFAEA,GAAMC,YAAW,CAAG,uBAApB,CAEA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,MAAmB,IAAhBC,UAAgB,MAAhBA,SAAgB,CACvC,GAAMC,cAAa,cAAGL,IAAI,CAAC,iBAAM,kBAAUI,SAAV,EAAN,EAAD,CAA1B,CACA,mBACE,KAAC,iBAAD,wBACE,KAAC,QAAD,EAAU,QAAQ,cAAE,mCAApB,uBACE,KAAC,aAAD,IADF,EADF,EADF,CAOD,CATD,CAWA,GAAME,IAAG,CAAG,QAANA,IAAM,OAAkB,8BAAfC,SAAe,OAAfA,QAAe,CAC5B;AACF;AACA,KACE,GAAIC,gBAAe,wBAAGC,YAAY,CAACC,OAAb,CAAqBR,WAArB,CAAH,+DAAwC,CAA3D,CACAM,eAAe,CAAGA,eAAe,CAAGD,QAAQ,CAACI,MAA3B,CAAoCH,eAApC,CAAsD,CAAxE,CACA,cAAgCV,QAAQ,CAACU,eAAD,CAAxC,wCAAOI,QAAP,eAAiBC,WAAjB,eAEA;AACF;AACA,KACE,GAAMC,MAAK,CAAGP,QAAQ,CAACK,QAAD,CAAtB,CAEA;AACF;AACA,KACE,GAAMG,aAAY,CAAG,QAAfA,aAAe,CAACC,KAAD,QAAWH,YAAW,CAACG,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAtB,EAArB,CACAnB,SAAS,CAAC,iBAAMU,aAAY,CAACU,OAAb,CAAqBjB,WAArB,CAAkCU,QAAlC,CAAN,EAAD,CAAoD,CAACA,QAAD,CAApD,CAAT,CAEA,mBACE,aAAK,SAAS,CAAC,KAAf,wBACE,eAAQ,SAAS,CAAC,YAAlB,CAA+B,KAAK,CAAEA,QAAtC,CAAgD,QAAQ,CAAEG,YAA1D,UACGR,QAAQ,CAACa,GAAT,CAAa,SAACC,EAAD,CAAKC,KAAL,qBACZ,eAAiB,KAAK,CAAEA,KAAxB,UACGD,EADH,EAAaA,EAAb,CADY,EAAb,CADH,EADF,cASE,aAAK,SAAS,CAAC,WAAf,wBACE,4DADF,cAEE,KAAC,aAAD,EAAe,SAAS,aAAOP,KAAP,kBAAxB,EAFF,GATF,cAaE,aAAK,SAAS,CAAC,SAAf,wBACE,2DADF,cAEE,KAAC,aAAD,EAAe,SAAS,aAAOA,KAAP,gBAAxB,EAFF,GAbF,GADF,CAoBD,CAvCD,CAyCA,cAAeR,IAAf"},"metadata":{},"sourceType":"module"}